<div class="bg">
  <h3>Assign Subject</h3>
  <div class="col-xs-12 col-md-12 mt-3 fieldset tab-cont-1 active">
    <form [formGroup]="addSubjectForm" (ngSubmit)="addSubjectSubmit()">
      <div class="elements-block">
        <div class="inner">
          <div class="row field-block Formbg">
            <div class="col-lg-6">
              <div class="form-group">
                <label class="form-control-label" for="staffID">Staff ID</label>
                <select
                  id="staffID"
                  class="form-control"
                  formControlName="staffID"
                  required
                  [ngClass]="{
                    'border-danger':
                      submitted &&
                      addSubjectForm.hasError('required', 'staffID')
                  }"
                >
                  <option value="" disabled selected>Choose Staff ID</option>
                </select>
                <div
                  *ngIf="
                    submitted && addSubjectForm.hasError('required', 'staffID')
                  "
                  class="text-danger"
                >
                  Staff ID is required.
                </div>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="form-group">
                <label class="form-control-label" for="staffName"
                  >Section</label
                >
                <select
                  id="staffName"
                  class="form-control"
                  formControlName="staffName"
                  required
                  [ngClass]="{
                    'border-danger':
                      submitted &&
                      addSubjectForm.hasError('required', 'staffName')
                  }"
                >
                <option value="" disabled selected>Choose Section Name</option>
                  <option *ngFor="let section of sectionData" [ngValue]="section.id">
            {{ section.section_name }}
          </option>
                </select>
                <div
                  *ngIf="
                    submitted &&
                    addSubjectForm.hasError('required', 'staffName')
                  "
                  class="text-danger"
                >
                Section is required.
                </div>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="form-group">
                <label class="form-control-label" for="subjectSelect">Subject</label>
                <div class="dropdown">
                  <button 
                    class="btn btns btn-secondary dropdown-toggle"
                    type="button"
                    id="subjectDropdown"
                    data-toggle="dropdown"
                    aria-haspopup="true"
                    aria-expanded="false"
                  >
                    Choose Subject Name
                  </button>
                  <div class="dropdown-menu dropdown-menus" aria-labelledby="subjectDropdown">
                    <div *ngFor="let subject of subjectData">
                      <input
                        type="checkbox"
                        [value]="subject.id"
                        (change)="onCheckboxChange($event)"
                        [checked]="isChecked(subject.id)"
                      />
                      {{ subject.subject_name }}
                    </div>
                  </div>
                </div>
            
                <!-- Validation error -->
                <div
                  *ngIf="
                    submitted && addSubjectForm.hasError('required', 'subjectName')
                  "
                  class="text-danger"
                >
                  Subject is required.
                </div>
              </div>
            </div>
            
            <div class="col-lg-6 assignSubmitBtn">
              <button
                [disabled]="loading"
                class="btn btn-primary btn-md"
                href="#"
                (click)="addSubjectSubmit()"
              >
                Submit
              </button>
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>
